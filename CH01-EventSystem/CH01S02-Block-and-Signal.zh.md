# 阻塞与通知

凡事都有例外，在实现状态机时，有时会使用一些特殊的系统调用（SysCall），这些系统调用会导致阻塞（Block），从而不能及时返回到引擎中，例如：在NetHandler中调用epoll_wait会有阻塞产生。

有时候引擎没有后续任务要执行，此时的阻塞就不是什么问题，如果有后续任务需要执行，这个阻塞就要及时被中断。

因此在引擎中设计了通知机制，向状态机发送通知来告知需要中断阻塞，尽快返回到引擎，以结束无谓的阻塞等待，可以及时处理其它的事件。

所以，在实现状态机时要特别注意这一点：

- 在需要阻塞／等待时，应当保存当前状态，然后返回到引擎
- 让引擎在下一个循环再驱动状态机继续执行

如果需要通过阻塞以获得更好的处理效果，则需要支持引擎的通知机制，在需要的时候及时返回引擎

接下来将详细讲述整个事件系统的构成与实现。
